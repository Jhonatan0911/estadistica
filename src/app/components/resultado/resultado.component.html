<div class="card">
  <h3 class="mb-3 text-lg md:text-xl font-bold text-primary">Resultado del An치lisis</h3>

  <div *ngIf="resultado">
    <!-- Comparaci칩n de grupos (cuando existen grupo1 y grupo2) -->
    <div *ngIf="resultado.grupo1 && resultado.grupo2">
      <h4 class="text-lg md:text-xl font-bold text-primary">Grupo: {{ resultado.grupo1.nombre }}</h4>
      <p><strong>Media:</strong> {{ resultado.grupo1.media | number: '1.2-2' }}</p>
      <p><strong>Desviaci칩n est치ndar:</strong> {{ resultado.grupo1.desviacionEstandar | number: '1.2-2' }}</p>
      <p><strong>Varianza:</strong> {{ resultado.grupo1.varianza | number: '1.2-2' }}</p>
      <p><strong>N:</strong> {{ resultado.grupo1.n }}</p>

      <h4 class="mt-3 text-lg md:text-xl font-bold text-primary">Grupo: {{ resultado.grupo2.nombre }}</h4>
      <p><strong>Media:</strong> {{ resultado.grupo2.media | number: '1.2-2' }}</p>
      <p><strong>Desviaci칩n est치ndar:</strong> {{ resultado.grupo2.desviacionEstandar | number: '1.2-2' }}</p>
      <p><strong>Varianza:</strong> {{ resultado.grupo2.varianza | number: '1.2-2' }}</p>
      <p><strong>N:</strong> {{ resultado.grupo2.n }}</p>

      <p>
        <strong>Diferencia de medias:</strong>
        {{ (resultado.grupo1.media - resultado.grupo2.media) | number: '1.2-2' }}
        <span *ngIf="resultado.grupo1.media > resultado.grupo2.media">
          ({{ resultado.grupo1.nombre }} > {{ resultado.grupo2.nombre }})
        </span>
        <span *ngIf="resultado.grupo1.media < resultado.grupo2.media">
          ({{ resultado.grupo2.nombre }} > {{ resultado.grupo1.nombre }})
        </span>
      </p>
    </div>

    <!-- Resultado de prueba t (si existe) -->
    <div *ngIf="resultado.pruebaT">
      <h4 class="mt-4 text-lg md:text-xl font-bold text-primary">Prueba t de Student</h4>

      <!-- Mensaje de advertencia si no se puede calcular t o p -->
      <div *ngIf="resultado.pruebaT.t === null || resultado.pruebaT.p === null || isNaN(resultado.pruebaT.t) || isNaN(resultado.pruebaT.p)" class="alert alert-warning">
        <p><strong>Prueba t:</strong> No se puede calcular valor p v치lido
          <span *ngIf="resultado.grupo1?.n === 1"> (grupo {{ resultado.grupo1.nombre }} tiene n=1)</span>
          <span *ngIf="resultado.grupo2?.n === 1"> (grupo {{ resultado.grupo2.nombre }} tiene n=1)</span>.
        </p>
        <p class="text-danger fw-bold">游댮 Advertencia: la muestra es muy peque침a para un an치lisis estad칤stico confiable.</p>
      </div>

      <!-- Resultados si existen -->
      <p *ngIf="resultado.pruebaT.t !== null && !isNaN(resultado.pruebaT.t)"><strong>Valor t:</strong> {{ resultado.pruebaT.t | number: '1.2-2' }}</p>
      <p *ngIf="resultado.pruebaT.sPooled !== null && !isNaN(resultado.pruebaT.sPooled)"><strong>Desviaci칩n combinada (s pooled):</strong> {{ resultado.pruebaT.sPooled | number: '1.2-2' }}</p>
      <p *ngIf="!isNaN(resultado.pruebaT.t) || !isNaN(resultado.pruebaT.p)"><strong>Conclusi칩n:</strong> {{ resultado.pruebaT.conclusion }}</p>
    </div>

    <!-- Descriptivo cuantitativo individual -->
    <div *ngIf="resultado.media !== undefined && resultado.tipo === 'Descriptivo Cuantitativo'">
      <h4 class="text-lg md:text-xl font-bold text-primary">An치lisis Descriptivo</h4>
      <p><strong>Media:</strong> {{ resultado.media | number: '1.2-2' }}</p>
      <p><strong>Desviaci칩n est치ndar:</strong> {{ resultado.desviacionEstandar | number: '1.2-2' }}</p>
      <p><strong>Varianza:</strong> {{ resultado.varianza | number: '1.2-2' }}</p>
      <p><strong>N:</strong> {{ resultado.n }}</p>
    </div>

    <!-- Intervalo de Confianza -->
    <div *ngIf="resultado.tipo === 'Intervalo de confianza'">
      <h4 class="text-lg md:text-xl font-bold text-primary">Intervalo de Confianza 95%</h4>
      <p><strong>Intervalo:</strong> [{{ resultado.intervalo[0] | number: '1.2-2' }} , {{ resultado.intervalo[1] | number: '1.2-2' }}]</p>
      <p><strong>Error est치ndar:</strong> {{ resultado.error | number: '1.2-2' }}</p>
    </div>

    <!-- Descriptivo Cualitativo -->
    <div *ngIf="resultado.tipo === 'Descriptivo Cualitativo'">
      <h4 class="text-lg md:text-xl font-bold text-primary">An치lisis Descriptivo Cualitativo</h4>
      <p><strong>Total:</strong> {{ resultado.total }}</p>
      <table class="p-datatable p-component">
        <thead>
          <tr>
            <th>Categor칤a</th>
            <th>Frecuencia</th>
            <th>Porcentaje</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of resultado.porcentajes">
            <td>{{ item.categoria }}</td>
            <td>{{ item.frecuencia }}</td>
            <td>{{ item.porcentaje }}%</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="!resultado">
    <p class="text-muted">No hay resultados disponibles.</p>
  </div>
</div>
